<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<style type="text/css">
#mapid { width: 100%; height: 800px; }
</style>

 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
   integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
   crossorigin=""/>
   
   <!-- Make sure you put this AFTER Leaflet's CSS -->
 <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
   integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
   crossorigin=""></script>
 <script src="js/leaflet-heat.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.4.4/proj4.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4leaflet/1.0.2/proj4leaflet.js"></script>
 <script src="js/leaflet-wfst.src.js"></script>
</head>
<body>
  <h2>Kartta</h2>
  
  <div id="mapid"></div>


  <script type="text/javascript">

var map = L.map('mapid').setView([60.1847, 24.8322], 13);

var tiles = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',
}).addTo(map);

var heat = L.heatLayer([
	[60.1877, 24.8312, 20], // lat, lng, intensity
	[60.1847, 24.8322, 5]
], {radius: 25}).addTo(map);

  var wfst = new L.WFST({
    url: 'http://geo.stat.fi/geoserver/postialue/wfs',
    typeNS: 'postialue',
    typeName: 'pno_tilasto_2018',
    crs: L.CRS.EPSG4326,
    geometryField: 'ogr_geometry',
    style: function(layer) {
     	//console.log(layer);
		// you can use if statemt etc
		return {
		  // todo: combine and process data 
		  color: layer.feature.properties.posti_alue=='02150' ? 'red' : 'grey',
		  weight: 1
		}
	}
  }, new L.Format.GeoJSON({crs: L.CRS.EPSG4326}))
    .addTo(map)
    .once('load', function () {
      //map.fitBounds(wfst.getBounds());
    });

  </script>
</body>
</html>